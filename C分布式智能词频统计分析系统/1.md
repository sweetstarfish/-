时间片轮转调度算法

轮流让就绪队列中的进程依次执行一个时间片，每次选择的是排在就绪队列队头的进程

系统将所有的就绪进程按先来先服务规则排成一个队列，每次调度时，将CPU分配给队首进程，并令其执行一个时间片，在这个时间片内如果进程之行结束了，则把进程从进程队列中删掉，如果进程没有结束，则把该进程停止然后改为等待状态，放到进程队列的尾部，再把CPU分配给就绪队列中新的队首进程，同时让它执行一个时间片，如此调度，直到所有进程执行完毕

1.轮流为各个进程服务，让每个进程在一定时间间隔内得到响应

2.按照各进程到达就绪队列的顺序，轮流让各个进程执行-一个时间片，若进程未在一个时间片内执行完，则剥夺处理机，将进程重新放到就绪队列队尾重新排队

3.用于作业/进程调度，只有作业放入内存建立相应的进程后，才能被分配处理及时间片

4.若进程未能在时间片内运行完，将强行剥夺处理机使用权，因此时间片轮转调度算法属于抢占式算法，由时钟装置发出时钟中断来通知CPU时间片已到

5.不会导致饥饿

分析时候，时间片大小分别为2和5的情况：
（1）时间片大小为2

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/c2623a0754e1ef904ad12005e37c8990.png)

（2）时间片大小为5

![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/605a9eb41489d511c7ceee8338f8dad6.png)

（3）若按照先来先服务调度算法
![在这里插入图片描述](https://i-blog.csdnimg.cn/blog_migrate/752f43192d970f65b44402adc8e2f5a5.png)

进程的切换
时间片够用：意思就是在该时间片内，进程可以运行至结束，进程运行结束之后，将进程从进程队列中删除，然后启动新的时间片。

时间片不够用：意思是在该时间片内，进程只能完成它的一部分任务，在时间片用完之后，将进程的状态改为等待状态，将进程放到进程队列的尾部，等待cpu的调用


PCB

存储进程状态信息的数据结构

PCB是进程存在的唯一标识

PCB的大小至少包括以下信息：

- 进程标识符（PID）：用于唯一标识进程。用于标识进程的唯一编号
- 进程状态：用于表示进程的状态，如就绪、运行、阻塞等。
- 程序计数器（Program Counter，PC）：用于记录下一条要执行的指令地址。
- 寄存器值：用于保存进程在执行过程中的寄存器值。
- 内存管理信息：用于记录进程的内存分配情况，包括代码段、数据段、堆栈等。
- 文件描述符表：用于记录进程打开的文件和文件描述符。
- 优先级：用于表示进程的优先级。
- 父进程标识符（PPID）：用于记录父进程的PID。
- 子进程列表：用于记录子进程的PID。
- 信号处理器：用于记录进程的信号处理器。
  

在时间片轮转调度中，PCB至少包含：

- **进程ID**：用于标识进程的唯一编号。
- **进程剩余执行时间**：进程未完成的执行时间，即每个进程所需的 CPU 时间。
- **时间片计数器**：当前时间片的剩余时间，用于控制每次调度时进程的执行时间。
- **优先级**（可选）：如果需要，可以为进程指定一个优先级。
- **进程状态**：如“就绪”、“运行”、“完成”等状态。

#### **进程描述文件设计**

设计一个文本文件来描述进程信息，格式可以简单而直观。例如，每行表示一个进程，每个进程包含如下信息：

- 进程ID
- 总执行时间
- 时间片大小（可选，默认为统一时间片大小）

#### **调度模拟逻辑**

1. **读取进程描述文件**：根据描述文件的内容，创建 PCB 并初始化进程队列。队列中的进程按照时间轮转的顺序进行调度。
2. **时间片轮转调度**：
   - 每次调度时，取出队列头部的进程执行。
   - 进程执行时，减去当前时间片。
   - 如果进程的剩余执行时间大于0，将进程重新插入队列尾部等待下一次调度。
   - 如果进程执行完毕，则从队列中移除。
3. **日志记录**：
   - 每次调度时，记录进程的执行状态（如：进程ID，执行时间等）。
   - 记录完整的调度过程和每个进程的执行情况。
4. **调度结束**：
   - 当所有进程执行完毕后，调度结束，记录并输出调度日志。

#### **可视化界面设计**

在 Windows 环境下，使用如 C++ 和 Qt 或 C# 和 WinForms/WPF 来开发可视化应用程序。

- **显示调度过程**：可使用一个列表框、进度条等组件显示进程执行的状态，实时更新进程的执行状态。
- **显示进程队列**：队列中的进程状态可以通过表格或列表展示，用户可以清晰地看到各个进程的执行情况。
- **进程执行情况**：使用文本框或日志框显示调度日志，记录每次进程的调度信息。
- **进度条**：为每个进程分配一个进度条，实时反映其执行的进度。
- **按钮控制**：提供启动、暂停、停止等控制按钮，用户可以控制调度过程。

#### **日志输出**

程序需要将调度过程输出到一个日志文件中，以便查看调度过程的详细信息。

**示例日志格式**（`schedule_log.txt`）：

```
调度开始：
进程1（PID=1）开始执行，剩余时间：10，时间片：3
进程2（PID=2）开始执行，剩余时间：5，时间片：2
进程3（PID=3）开始执行，剩余时间：8，时间片：4
...
进程1（PID=1）执行完毕，剩余时间：0
进程2（PID=2）执行完毕，剩余时间：0
进程3（PID=3）执行完毕，剩余时间：0
调度结束：
```