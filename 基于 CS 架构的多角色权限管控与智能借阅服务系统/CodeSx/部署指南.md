# 超市管理系统部署指南

## 项目概述
这是一个全栈项目，包含：
- 后端：Spring Boot + MyBatis + MySQL (Supermarket目录)
- 前端：Vue 3 + Element Plus + Vite (Sxvue目录)

## 环境要求
- Java 17
- Node.js 20.19.0+
- MySQL 8.0+
- IDEA 2023.1+

## 部署步骤

### 1. 数据库配置

1. **安装MySQL**
   - 下载并安装MySQL 8.0+
   - 启动MySQL服务

2. **创建数据库**
   ```sql
   CREATE DATABASE smbms_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   ```

3. **导入数据**
   - 使用MySQL客户端连接数据库
   - 执行 `Supermarket/src/main/resources/data.sql` 文件

### 2. 后端项目配置

1. **在IDEA中打开项目**
   - 选择 `File` → `Open`
   - 选择 `Supermarket` 文件夹
   - IDEA会自动识别为Maven项目

2. **配置JDK**
   - 打开 `File` → `Project Structure`
   - 在 `Project` 选项卡中设置SDK为Java 17
   - 在 `Modules` 选项卡中确保语言级别为17

3. **修改数据库配置**
   - 打开 `src/main/resources/application.yml`
   - 修改数据库连接信息：
   ```yaml
   spring:
     datasource:
       url: jdbc:mysql://localhost:3306/smbms_db?useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&useSSL=false&serverTimezone=GMT%2b8&allowPublicKeyRetrieval=true
       username: 你的MySQL用户名
       password: 你的MySQL密码
   ```

4. **安装依赖**
   - 在IDEA中打开Maven工具窗口
   - 点击刷新按钮下载所有依赖

5. **启动后端服务**
   - 找到 `SupermarketApplication.java`
   - 右键选择 `Run 'SupermarketApplication'`
   - 或者使用Maven命令：`mvn spring-boot:run`

### 3. 前端项目配置

1. **安装Node.js**
   - 下载并安装Node.js 20.19.0+
   - 验证安装：`node --version`

2. **安装前端依赖**
   ```bash
   cd Sxvue
   npm install
   ```

3. **启动前端开发服务器**
   ```bash
   npm run dev
   ```

### 4. 验证部署

1. **后端验证**
   - 访问 `http://localhost:4399`
   - 应该能看到Spring Boot的默认页面或API响应

2. **前端验证**
   - 访问 `http://localhost:5173` (Vite默认端口)
   - 应该能看到Vue应用的登录页面

3. **API测试**
   - 使用Postman或浏览器测试API接口
   - 登录接口：`POST http://localhost:4399/api/auth/login`

## 默认账户信息

根据 `data.sql` 文件，系统预置了以下测试账户：

| 用户名 | 密码 | 角色 |
|--------|------|------|
| admin | 123456 | 系统管理员 |
| user001 | 123456 | 经理 |
| user002 | 123456 | 普通员工 |

## 常见问题解决

### 1. 数据库连接失败
- 检查MySQL服务是否启动
- 验证数据库用户名和密码
- 确认数据库 `smbms_db` 已创建

### 2. 端口冲突
- 后端默认端口：4399
- 前端默认端口：5173
- 如果端口被占用，可以修改配置文件中的端口号

### 3. 依赖下载失败
- 检查网络连接
- 配置Maven镜像源
- 清理并重新下载依赖：`mvn clean install`

### 4. 前端构建失败
- 确保Node.js版本符合要求
- 删除 `node_modules` 并重新安装：`rm -rf node_modules && npm install`

## 项目结构说明

```
CodeSx/
├── Supermarket/          # 后端Spring Boot项目
│   ├── src/main/java/   # Java源代码
│   ├── src/main/resources/ # 配置文件和资源
│   └── pom.xml          # Maven配置文件
└── Sxvue/               # 前端Vue项目
    ├── src/             # Vue源代码
    ├── public/          # 静态资源
    └── package.json     # Node.js配置文件
```

## 开发建议

1. **使用IDEA的集成功能**
   - 在IDEA中同时打开前后端项目
   - 使用IDEA的终端功能运行命令

2. **调试配置**
   - 配置Spring Boot的调试配置
   - 使用Vue DevTools进行前端调试

3. **热重载**
   - 后端：Spring Boot支持热重载
   - 前端：Vite默认支持热重载

## 生产部署

1. **后端打包**
   ```bash
   cd Supermarket
   mvn clean package
   ```

2. **前端构建**
   ```bash
   cd Sxvue
   npm run build
   ```

3. **部署到服务器**
   - 将生成的JAR文件部署到服务器
   - 将前端构建文件部署到Web服务器 